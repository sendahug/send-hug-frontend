<!-- New items -->
<div id="newItems" class="listContainer">
	<h2 class="listTitle" id="newTitle">New Items</h2>
	
	<app-loader
		[waitingFor]="waitFor"></app-loader>
	
	<!-- If there are items in the list -->
	<ul class="itemList" *ngIf="postsService.newItemsArray.length > 0 && postsService.isMainPageResolved.value" role="region" aria-describedby="newTitle" id="newItemsList">
		<li *ngFor="let item of postsService.newItemsArray" class="newItem" aria-describedby="newTitle" role="article">
			<div class="itemText" aria-describedby="pText" id="{{'nPost' + item.id}}">{{ item.text }}</div>
			<div class="itemUser">By <a [routerLink]="['/user', item.userId ]" class="profileLink" aria-describedby="pUser" id="{{'nUser' + item.id}}">{{ item.user }}</a> </div>
			<div class="buttonsContainer">
				<div class="notification" [attr.aria-describedby]="'pHug ' + 'nUser' + item.id">
					<button *ngIf="!item.sentHugs.includes(authService.userData.id.toString())" class="textlessButton hugButton" (click)="sendHug(item.id)" [attr.aria-labelledby]="'pHug ' + 'nUser' + item.id" name="send a hug"><i class="fas fa-hand-holding-heart"></i></button>
					<button *ngIf="item.sentHugs.includes(authService.userData.id.toString())" class="textlessButton hugButton active" [attr.aria-labelledby]="'pHug ' + 'nUser' + item.id" name="send a hug" disabled><i class="fas fa-hand-holding-heart"></i></button>
					<span class="badge" aria-describedby="pGivenH">{{ item.givenHugs }}</span>
				</div>
				<a [routerLink]="['/new', 'Message']" [queryParams]="{user: item.user, userID: item.userId}" class="textlessButton messageButton" [attr.aria-labelledby]="'pMessage ' + 'nUser' + item.id" name="send a message"><i class="far fa-comment"></i></a>
				<button class="textlessButton reportButton" (click)="reportPost(item)" [attr.aria-labelledby]="'pReport ' + 'nPost' + item.id" name="report"><i class="far fa-flag"></i></button>
				<button *ngIf="authService.canUser('patch:any-post')" class="textlessButton editButton" (click)="editPost(item)" [attr.aria-labelledby]="'pEdit ' + 'nPost' + item.id"><i class="far fa-edit"></i></button>
				<button *ngIf="authService.canUser('delete:any-post')" class="textlessButton deleteButton" (click)="deletePost(item.id)" [attr.aria-labelledby]="'pDelete ' + 'nPost' + item.id"><i class="fas fa-times"></i></button>
			</div>
		</li>
	</ul>
	
	<!-- If there are no items in the list -->
	<div class="errorMessage" *ngIf="postsService.newItemsArray.length == 0 && postsService.isMainPageResolved.value">There are no recent items.</div>
	
	<a [routerLink]="['/list', 'New']" [queryParams]="{page: 1}" class="textlessButton fullButton" aria-label="View full list of new items" id="fullNew">View Full 'New' List</a>
</div>

<!-- Suggested items -->
<div id="suggestedItems" class="listContainer">
	<h2 class="listTitle" id="sugTitle">Suggested Items</h2>
	
	<app-loader
		[waitingFor]="waitFor"></app-loader>
	
	<!-- If there are items in the list -->
	<ul class="itemList" *ngIf="postsService.sugItemsArray.length > 0 && postsService.isMainPageResolved.value" role="region" aria-describedby="sugTitle" id="sugItemsList">
		<li *ngFor="let item of postsService.sugItemsArray" class="sugItem" aria-describedby="sugTitle" role="article">
			<div class="itemText" aria-describedby="pText" id="{{'sPost' + item.id}}">{{ item.text }}</div>
			<div class="itemUser">By <a [routerLink]="['/user', item.userId ]" class="profileLink" aria-describedby="pUser" id="{{'sUser' + item.id}}">{{ item.user }}</a> </div>
			<div class="buttonsContainer">
				<div class="notification">
					<button *ngIf="!item.sentHugs.includes(authService.userData.id.toString())" class="textlessButton hugButton" (click)="sendHug(item.id)" [attr.aria-labelledby]="'pHug ' + 'nUser' + item.id" name="send a hug"><i class="fas fa-hand-holding-heart"></i></button>
					<button *ngIf="item.sentHugs.includes(authService.userData.id.toString())" class="textlessButton hugButton active" [attr.aria-labelledby]="'pHug ' + 'nUser' + item.id" name="send a hug" disabled><i class="fas fa-hand-holding-heart"></i></button>
					<span class="badge" aria-describedby="pGivenH">{{ item.givenHugs }}</span>
				</div>
				<a [routerLink]="['/new', 'Message']" [queryParams]="{user: item.user, userID: item.userId}" class="textlessButton messageButton" [attr.aria-labelledby]="'pMessage ' + 'sUser' + item.id"><i class="far fa-comment"></i></a>
				<button class="textlessButton reportButton" (click)="reportPost(item)" [attr.aria-labelledby]="'pReport ' + 'sPost' + item.id" name="report"><i class="far fa-flag"></i></button>
				<button *ngIf="authService.canUser('patch:any-post')" class="textlessButton editButton" (click)="editPost(item)" [attr.aria-labelledby]="'pEdit ' + 'sPost' + item.id"><i class="far fa-edit"></i></button>
				<button *ngIf="authService.canUser('delete:any-post')" class="textlessButton deleteButton" (click)="deletePost(item.id)" [attr.aria-labelledby]="'pDelete ' + 'sPost' + item.id"><i class="fas fa-times"></i></button>
			</div>
		</li>
	</ul>

	<!-- If there are no items in the list -->
	<div class="errorMessage" *ngIf="postsService.sugItemsArray.length == 0 && postsService.isMainPageResolved.value">There are no suggested items.</div>
	
	<a [routerLink]="['/list', 'Suggested']" [queryParams]="{page: 1}" class="textlessButton fullButton" role="navigation" aria-label="View full list of suggested items">View Full 'Suggested' List</a>
</div>

<div id="labels" class="labels" aria-hidden="true">
	<p id="pText">Post Text</p>
	<p id="pUser">Post Writer</p>
	<p id="pHug">Send a hug to user</p>
	<p id="pGivenH">Hugs given to this post</p>
	<p id="pMessage">Send a message to user</p>
	<p id="pReport">Report post</p>
	<p id="pEdit">Edit post</p>
	<p id="pDelete">Delete post</p>
</div>

<app-pop-up *ngIf="editMode"
			[editedItem]="postToEdit"
			[toEdit]="editType"
			(editMode)="changeMode($event)"
			[delete]="delete"
			[toDelete]="toDelete"
			[itemToDelete]="itemToDelete"
			[report]="report"
			[reportedItem]="reportedItem"
			[reportType]="reportType"></app-pop-up>