<!-- If the user is logged in, displays a user page. -->
<div *ngIf="authService.authenticated">
	<app-loader
		[waitingFor]="waitFor"></app-loader>
	
	<app-header-message
		[waitingFor]="waitFor"></app-header-message>

	<div id="userPage" *ngIf="(!this.itemsService.isOtherUser && authService.isUserDataResolved.value) || (this.itemsService.isOtherUser && itemsService.idbResolved.user.value)">
		<div id="profileData">
			<h3>User Profile</h3>
			<div class="profileElement">
				<span class="pageCategory">Username:</span>
				<span class="pageData" *ngIf="!itemsService.isOtherUser">{{ authService.userData.displayName }}</span> 
				<span class="pageData" *ngIf="itemsService.isOtherUser">{{ itemsService.otherUserData.displayName }} 
					<button class="appButton hugButton" (click)="sendHug(itemsService.otherUserData.id)">
						<i class="fab fa-gratipay"></i>
					</button>
				</span>
			</div>
			<div class="profileElement">
				<span class="pageCategory">Role:</span> <span class="pageData" *ngIf="!itemsService.isOtherUser">{{ authService.userData.role }}</span> <span class="pageData" *ngIf="itemsService.isOtherUser">{{ itemsService.otherUserData.role }}</span>
			</div>
			<div class="profileElement">
				<span class="pageCategory">Received Hugs:</span> <span class="pageData" *ngIf="!itemsService.isOtherUser">{{ authService.userData.receivedHugs }}</span> <span class="pageData" *ngIf="itemsService.isOtherUser">{{ itemsService.otherUserData.receivedHugs }}</span>
			</div>
			<div class="profileElement">
				<span class="pageCategory">Given Hugs:</span> <span class="pageData" *ngIf="!itemsService.isOtherUser">{{ authService.userData.givenHugs }}</span> <span class="pageData" *ngIf="itemsService.isOtherUser">{{ itemsService.otherUserData.givenHugs }}</span>
			</div>
			<div class="profileElement">
				<span class="pageCategory">Posts:</span> <span class="pageData" *ngIf="!itemsService.isOtherUser">{{ authService.userData.postsNum }}</span> <span class="pageData" *ngIf="itemsService.isOtherUser">{{ itemsService.otherUserData.postsNum }}</span>
			</div>
			
			<button id="editName" class="appButton" (click)="editName()" *ngIf="!itemsService.isOtherUser">Edit Display Name</button>
			<button class="appButton reportButton" (click)="reportUser(itemsService.otherUserData)" *ngIf="itemsService.isOtherUser">Report User</button>
		</div>

		<app-my-posts
					  [userID]="userId"></app-my-posts>
		
		<button id="logout" class="appButton" (click)="logout()" *ngIf="!itemsService.isOtherUser">Log Out</button>
	</div>
</div>

<!-- If the user isn't logged in, prompts the user to log in. -->
<div  id="loginBox" *ngIf="!authService.authenticated">
	<div class="errorMessage">You are not currently logged in. To view user information, log in.</div>

	<button id="logIn" class="appButton" (click)="login()">Login</button>
</div>

<app-pop-up *ngIf="editMode"
			[editedItem]="userToEdit"
			[toEdit]="editType"
			(editMode)="changeMode($event)"
			[report]="report"
			[reportedItem]="reportedItem"
			[reportType]="reportType"></app-pop-up>